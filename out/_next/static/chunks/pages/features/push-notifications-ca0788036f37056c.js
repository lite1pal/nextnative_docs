(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[532],{9647:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/features/push-notifications",function(){return s(9458)}])},9458:function(e,n,s){"use strict";s.r(n),s.d(n,{__toc:function(){return l}});var t=s(5893),i=s(2673),a=s(5865),o=s(8426);s(9128);var r=s(2643);let l=[{depth:2,value:"✨ Step 1: Set up your Firebase Cloud Messaging (FCM)",id:"-step-1-set-up-your-firebase-cloud-messaging-fcm"},{depth:2,value:"⚖️ Step 2: Test sending push notifications manually",id:"️-step-2-test-sending-push-notifications-manually"},{depth:2,value:"\uD83D\uDCE1 Step 3: Request push permissions (on device)",id:"-step-3-request-push-permissions-on-device"},{depth:2,value:"\uD83C\uDFAE Step 4: Get and update FCM token",id:"-step-4-get-and-update-fcm-token"},{depth:2,value:"\uD83D\uDE80 Step 5: Listen to notifications",id:"-step-5-listen-to-notifications"},{depth:2,value:"\uD83D\uDEAB Remove listeners when done",id:"-remove-listeners-when-done"},{depth:2,value:"\uD83D\uDEE0️ Troubleshooting",id:"️-troubleshooting"},{depth:2,value:"\uD83D\uDD04 Next steps",id:"-next-steps"}];function _createMdxContent(e){let n=Object.assign({h1:"h1",p:"p",strong:"strong",a:"a",h2:"h2",ul:"ul",li:"li",code:"code",hr:"hr",pre:"pre",span:"span"},(0,r.a)(),e.components),{Callout:s}=n;return s||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Callout",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{children:"Firebase Push Notifications"}),"\n",(0,t.jsx)(s,{type:"warning",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Before you continue:"})," Make sure you've completed the ",(0,t.jsx)(n.a,{href:"./authorization",children:"Firebase\nAuthentication"})," tutorial first. It walks you through creating\na Firebase project and setting up your iOS/Android apps — which is required\nfor push notifications to work."]})}),"\n",(0,t.jsx)(n.h2,{id:"-step-1-set-up-your-firebase-cloud-messaging-fcm",children:"✨ Step 1: Set up your Firebase Cloud Messaging (FCM)"}),"\n",(0,t.jsx)(n.p,{children:"Make sure you:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Have ",(0,t.jsx)(n.strong,{children:"Firebase Messaging"})," enabled in your Firebase project."]}),"\n",(0,t.jsxs)(n.li,{children:["Downloaded the ",(0,t.jsx)(n.strong,{children:"service account JSON file"})," from Firebase Console","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Navigate to ",(0,t.jsx)(n.code,{children:"Project Settings → Service Accounts"})]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.code,{children:"Generate new private key"})]}),"\n",(0,t.jsxs)(n.li,{children:["Place it in ",(0,t.jsx)(n.code,{children:"services/firebase/"})," and rename if needed"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"️-step-2-test-sending-push-notifications-manually",children:"⚖️ Step 2: Test sending push notifications manually"}),"\n",(0,t.jsxs)(n.p,{children:["Use the prebuilt ",(0,t.jsx)(n.code,{children:"sendFcmMessage(fcmMessage)"})," function:"]}),"\n",(0,t.jsx)(n.pre,{"data-language":"ts","data-theme":"default",children:(0,t.jsxs)(n.code,{"data-language":"ts","data-theme":"default",children:[(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"sendFcmMessage"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"({"})]}),"\n",(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  message"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    token"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"<device-fcm-token>"'}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    notification"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      title"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"New Message"'}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      body"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"You\'ve got mail \uD83D\uDE80"'}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    }"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  }"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,t.jsx)(n.span,{className:"line",children:(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"});"})})]})}),"\n",(0,t.jsx)(n.p,{children:"This function handles:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Authenticating with Firebase via service account"}),"\n",(0,t.jsxs)(n.li,{children:["Sending a POST request to the ",(0,t.jsx)(n.a,{href:"https://firebase.google.com/docs/cloud-messaging/send-message",children:"FCM endpoint"})]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-step-3-request-push-permissions-on-device",children:"\uD83D\uDCE1 Step 3: Request push permissions (on device)"}),"\n",(0,t.jsx)(n.p,{children:"This is already handled via:"}),"\n",(0,t.jsx)(n.pre,{"data-language":"ts","data-theme":"default",children:(0,t.jsx)(n.code,{"data-language":"ts","data-theme":"default",children:(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"checkAndRequestPermissionsForPushNotifications"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]})})}),"\n",(0,t.jsx)(n.p,{children:"You can also do it manually:"}),"\n",(0,t.jsx)(n.pre,{"data-language":"ts","data-theme":"default",children:(0,t.jsxs)(n.code,{"data-language":"ts","data-theme":"default",children:[(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"checkPermissions"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]}),"\n",(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"requestPermissions"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]})]})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-step-4-get-and-update-fcm-token",children:"\uD83C\uDFAE Step 4: Get and update FCM token"}),"\n",(0,t.jsx)(n.p,{children:"Tokens are generated per device. You need to:"}),"\n",(0,t.jsx)(n.pre,{"data-language":"ts","data-theme":"default",children:(0,t.jsx)(n.code,{"data-language":"ts","data-theme":"default",children:(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"updateFcmToken"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"(user);"})]})})}),"\n",(0,t.jsx)(n.p,{children:"This will:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Request FCM token"}),"\n",(0,t.jsxs)(n.li,{children:["Send it to your API (",(0,t.jsx)(n.code,{children:"/user/update-fcm-token"}),") along with user info"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-step-5-listen-to-notifications",children:"\uD83D\uDE80 Step 5: Listen to notifications"}),"\n",(0,t.jsx)(n.p,{children:"These listeners are pre-written for you. You just need to enable them:"}),"\n",(0,t.jsx)(n.pre,{"data-language":"ts","data-theme":"default",children:(0,t.jsxs)(n.code,{"data-language":"ts","data-theme":"default",children:[(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"addNotificationReceivedListener"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]}),"\n",(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"addNotificationActionPerformedListener"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]})]})}),"\n",(0,t.jsx)(n.p,{children:"If needed:"}),"\n",(0,t.jsx)(n.pre,{"data-language":"ts","data-theme":"default",children:(0,t.jsxs)(n.code,{"data-language":"ts","data-theme":"default",children:[(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"addTokenReceivedListener"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]}),"\n",(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"getDeliveredNotifications"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]})]})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-remove-listeners-when-done",children:"\uD83D\uDEAB Remove listeners when done"}),"\n",(0,t.jsx)(n.pre,{"data-language":"ts","data-theme":"default",children:(0,t.jsx)(n.code,{"data-language":"ts","data-theme":"default",children:(0,t.jsxs)(n.span,{className:"line",children:[(0,t.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"removeAllListeners"}),(0,t.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"();"})]})})}),"\n",(0,t.jsx)(n.p,{children:"This is useful to clean up when user logs out or app closes."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"️-troubleshooting",children:"\uD83D\uDEE0️ Troubleshooting"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"If messages are not delivered:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Make sure token is valid"}),"\n",(0,t.jsx)(n.li,{children:"Check Firebase Console > Logs"}),"\n",(0,t.jsxs)(n.li,{children:["Verify service account has ",(0,t.jsx)(n.strong,{children:"Firebase Admin SDK"})," enabled"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["If your token changes, make sure to update it again via ",(0,t.jsx)(n.code,{children:"updateFcmToken()"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-next-steps",children:"\uD83D\uDD04 Next steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Trigger push messages from your server (e.g. when new message arrives)"}),"\n",(0,t.jsx)(n.li,{children:"Add topic-based notifications if needed"}),"\n",(0,t.jsx)(n.li,{children:"Customize notification appearance with images and actions"}),"\n"]})]})}let c={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,r.a)(),e.components);return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/features/push-notifications.mdx",route:"/features/push-notifications",timestamp:1751637103e3,pageMap:[{kind:"Meta",data:{index:"\uD83D\uDE80 Get started ↗",tutorials:"\uD83D\uDCDA Tutorials",features:"✨ Features","preparing-for-deployment":"\uD83D\uDE80 Prep for deployment!",components:"\uD83E\uDDE9 Components"}},{kind:"Folder",name:"components",route:"/components",children:[{kind:"Meta",data:{"screen-container":"Screen Container",modal:"Modal"}},{kind:"MdxPage",name:"modal",route:"/components/modal"},{kind:"MdxPage",name:"screen-container",route:"/components/screen-container"}]},{kind:"Folder",name:"features",route:"/features",children:[{kind:"Meta",data:{database:"\uD83D\uDDC2️ Database","nextjs-api":"\uD83D\uDD17 API",authorization:"\uD83D\uDD12 Authorization","in-app-purchases":"\uD83D\uDCB0 In-App Purchases","push-notifications":"\uD83D\uDD14 Push Notifications"}},{kind:"MdxPage",name:"authorization",route:"/features/authorization"},{kind:"MdxPage",name:"database",route:"/features/database"},{kind:"MdxPage",name:"in-app-purchases",route:"/features/in-app-purchases"},{kind:"MdxPage",name:"nextjs-api",route:"/features/nextjs-api"},{kind:"MdxPage",name:"push-notifications",route:"/features/push-notifications"}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"preparing-for-deployment",route:"/preparing-for-deployment",children:[{kind:"Meta",data:{"rename-your-app":"\uD83D\uDCDD Rename your app","change-app-icon":"\uD83C\uDFA8 Change app icon","build-app-for-production":"\uD83C\uDFD7️ Build app for production"}},{kind:"MdxPage",name:"build-app-for-production",route:"/preparing-for-deployment/build-app-for-production"},{kind:"MdxPage",name:"change-app-icon",route:"/preparing-for-deployment/change-app-icon"},{kind:"MdxPage",name:"rename-your-app",route:"/preparing-for-deployment/rename-your-app"}]},{kind:"MdxPage",name:"preparing-for-deployment",route:"/preparing-for-deployment"},{kind:"Folder",name:"tutorials",route:"/tutorials",children:[{kind:"Meta",data:{"ship-in-5-minutes":"⚡️ Ship in 5 minutes","ionic-router":"\uD83D\uDD17 Router","native-device-features":"\uD83D\uDCF1 Native APIs","splash-screen":"\uD83C\uDFA8 Splash Screen","onboarding-flow":"\uD83D\uDD11 Onboarding Flow"}},{kind:"MdxPage",name:"ionic-router",route:"/tutorials/ionic-router"},{kind:"MdxPage",name:"native-device-features",route:"/tutorials/native-device-features"},{kind:"MdxPage",name:"onboarding-flow",route:"/tutorials/onboarding-flow"},{kind:"MdxPage",name:"ship-in-5-minutes",route:"/tutorials/ship-in-5-minutes"},{kind:"MdxPage",name:"splash-screen",route:"/tutorials/splash-screen"}]}],flexsearch:{codeblocks:!0},title:"Firebase Push Notifications",headings:l},pageNextRoute:"/features/push-notifications",nextraLayout:a.ZP,themeConfig:o.Z};n.default=(0,i.j)(c)},8426:function(e,n,s){"use strict";var t=s(5893);s(7294);var i=s(9013);let a={logo:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,t.jsx)("span",{style:{position:"relative",top:"2px"},children:(0,t.jsxs)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M11.3711 23.8639L23.6958 11.1566",stroke:"#06B300",strokeWidth:"3",strokeLinecap:"round"}),(0,t.jsx)("path",{d:"M6.69141 19.3918L19.0161 6.68448",stroke:"#06B300",strokeWidth:"3",strokeLinecap:"round"}),(0,t.jsx)("path",{d:"M2 14.8401L14.3247 2.1328",stroke:"#06B300",strokeWidth:"3",strokeLinecap:"round"})]})}),(0,t.jsx)("p",{style:{fontSize:"1.5rem",fontWeight:500},children:"nextnative"})]}),logoLink:"https://nextnative.dev",banner:{key:"cta-banner",text:(0,t.jsxs)("span",{children:["\uD83D\uDE80 ",(0,t.jsx)("strong",{children:"Launch mobile apps 10x faster with Next.js"}),(0,t.jsx)("a",{href:"https://nextnative.dev",target:"_blank",style:{textDecoration:"underline",fontWeight:600,color:"#06B300",marginLeft:"6px"},children:"Get NextNative →"})]})},project:{link:"https://github.com/lite1pal"},docsRepositoryBase:"https://github.com/lite1pal/nextnative_docs",footer:{text:"NextNative Docs"},head:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("meta",{name:"robots",content:"index, follow"}),(0,t.jsx)("meta",{name:"title",content:"NextNative Docs"}),(0,t.jsx)("link",{rel:"canonical",href:"https://nextnative.dev/docs".concat(window.location.pathname)})]}),components:{Callout:i.UW},useNextSeoProps:()=>({titleTemplate:"%s – NextNative Docs"}),primaryHue:{dark:100,light:130},primarySaturation:{dark:100,light:50}};n.Z=a},5789:function(){}},function(e){e.O(0,[735,774,888,179],function(){return e(e.s=9647)}),_N_E=e.O()}]);